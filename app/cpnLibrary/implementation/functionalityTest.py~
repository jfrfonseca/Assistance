# This is an example of how to connect to and use the Bitmessage API.
# See https://bitmessage.org/wiki/API_Reference

import xmlrpclib
import json
import time

import sys
sys.path.insert(0, 'src')

api = xmlrpclib.ServerProxy("http://assistanceMaster:friendsAreFamily@localhost:8442/")

print 'Let\'s test the API first.'
inputstr1 = "hello"
inputstr2 = "world"
print api.helloWorld(inputstr1, inputstr2)
print api.add(2,3)

print 'Let\'s set the status bar message.'
print api.statusBar("new status bar message")

print 'Let\'s list our addresses:'
print api.listAddresses()

print 'Let\'s list our address again, but this time let\'s parse the json data into a Python data structure:'
jsonAddresses = json.loads(api.listAddresses())
print jsonAddresses
print 'Now that we have our address data in a nice Python data structure, let\'s look at the first address (index 0) and print its label:'
print jsonAddresses['addresses'][0]['label']
